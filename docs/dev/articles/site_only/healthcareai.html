<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Healthcare.ai Fundamentals • healthcareai</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><meta property="og:title" content="Healthcare.ai Fundamentals">
<meta property="og:description" content="">
<meta property="og:image" content="https://docs.healthcare.ai/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">healthcareai</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development package">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/site_only/fake_vignette.html">fake vignette</a>
    </li>
    <li>
      <a href="../../articles/site_only/healthcareai.html">Healthcare.ai Fundamentals</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Healthcare.ai Fundamentals</h1>
                        <h4 class="author">Michael Levy</h4>
            
            <h4 class="date">3/30/2018</h4>
      
      

    </div>

    
    
<div id="set-up" class="section level1">
<h1 class="hasAnchor">
<a href="#set-up" class="anchor"></a>Set up</h1>
<p>First we “attach” the healthcareai R package to make its functions available. If your package version is less than 2.0, none of the code here will work. You can check the package version with <code>packageVersion("healthcareai")</code>, and you can get the latest, cutting-edge development version with <code>install.packages("remotes"); remotes::install_github("HealthCatalyst/healthcareai-r")</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(healthcareai)</a></code></pre></div>
<p><code>healthcareai</code> comes with a built in dataset on diabetes among adult Pima females. Once you attach the package, the dataset is available in the variable name <code>pima_diabetes</code>. Let’s take a look at the data. There are 768 records in 10 variables, including one identifier column, and there seems to be substantial missingness (represented in R by <code>NA</code>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">str</span>(pima_diabetes)</a></code></pre></div>
<pre><code>## Classes 'tbl_df', 'tbl' and 'data.frame':    768 obs. of  10 variables:
##  $ patient_id    : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ pregnancies   : int  6 1 8 1 0 5 3 10 2 8 ...
##  $ plasma_glucose: int  148 85 183 89 137 116 78 115 197 125 ...
##  $ diastolic_bp  : int  72 66 64 66 40 74 50 NA 70 96 ...
##  $ skinfold      : int  35 29 NA 23 35 NA 32 NA 45 NA ...
##  $ insulin       : int  NA NA NA 94 168 NA 88 NA 543 NA ...
##  $ weight_class  : chr  "obese" "overweight" "normal" "overweight" ...
##  $ pedigree      : num  0.627 0.351 0.672 0.167 2.288 ...
##  $ age           : int  50 31 32 21 33 30 26 29 53 54 ...
##  $ diabetes      : chr  "Y" "N" "Y" "N" ...</code></pre>
</div>
<div id="quick-dirty-machine-learning" class="section level1">
<h1 class="hasAnchor">
<a href="#quick-dirty-machine-learning" class="anchor"></a>Quick &amp; Dirty Machine Learning</h1>
<p>Suppose we don’t want to fuss with any details any more than necessary. <code>healthcareai</code> makes it easy to implement machine learning models and takes care of all of the detais in the background so that you don’t have to worry about them. Of course it might be wise to worry about them, and we’ll get to how to do that further down, but for now, you can take care of any problems in the data, do some basic feature engineering, and tune multiple machine learning models using cross validation with the high-level <code>machine_learn</code> function.</p>
<p><code>machine_learn</code> always get the name of the data frame, then list any columns that should not be used by the model (uninformative columns, such as IDs), then specify the variable you want to predict with <code>outcome =</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">quick_models &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/machine_learn.html">machine_learn</a></span>(pima_diabetes, patient_id, <span class="dt">outcome =</span> diabetes)</a></code></pre></div>
<pre><code>## Training new data prep recipe</code></pre>
<pre><code>## Variable(s) ignored in prep_data won't be used to tune models: patient_id</code></pre>
<pre><code>## diabetes looks categorical, so training classification algorithms.</code></pre>
<pre><code>## Running cross validation for Random Forest</code></pre>
<pre><code>## Running cross validation for k-Nearest Neighbors</code></pre>
<p><code>machine_learn</code> has told us that it has created a recipe for data preparation (this makes it easy to do the same data cleaning and feature engineering when you want predictions on a new dataset), is ignoring <code>patient_id</code> when tuning models as we told it to, is training classification algorithms because the outcome variable <code>diabetes</code> is categorical, and has executed cross validation for two machine learning models, random forests, and k-nearest neighbors. Let’s see what’s in the object it has created.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">quick_models</a></code></pre></div>
<pre><code>## Algorithms Trained: Random Forest, k-Nearest Neighbors
## Target: diabetes
## Class: Classification
## Performance Metric: ROC
## Number of Observations: 768
## Number of Features: 12
## Models Trained: 2018-03-30 08:16:17 
## 
## Models tuned via 5-fold cross validation over 10 combinations of hyperparameter values.
## Best model: Random Forest
## ROC = 0.85
## Optimal hyperparameter values:
##   mtry = 4
##   splitrule = extratrees
##   min.node.size = 12</code></pre>
<p>It has some details about the dataset and the model training, and it tells us that the best model is is a random forest that achives performance of AUROC of 0.85. Not too bad for one line of code.</p>
<p>We can make predictions using the <code>predict</code> function. If you provide a new data frame to <code>predict</code> it will make predictions on the new data; otherwise, it will make predictions on the training data.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">predict</span>(quick_models)</a></code></pre></div>
<pre><code>## "predicted_diabetes" predicted by Random Forest last trained: 2018-03-30 08:16:17
## Performance in training: ROC = 0.85</code></pre>
<pre><code>## # A tibble: 768 x 14
##    diabetes predicted_diabetes pregnancies plasma_glucose diastolic_bp
##  * &lt;fct&gt;                 &lt;dbl&gt;       &lt;int&gt;          &lt;dbl&gt;        &lt;dbl&gt;
##  1 Y                    0.756            6           148.         72.0
##  2 N                    0.0949           1            85.         66.0
##  3 Y                    0.559            8           183.         64.0
##  4 N                    0.0132           1            89.         66.0
##  5 Y                    0.694            0           137.         40.0
##  6 N                    0.189            5           116.         74.0
##  7 Y                    0.298            3            78.         50.0
##  8 N                    0.356           10           115.         72.4
##  9 Y                    0.850            2           197.         70.0
## 10 Y                    0.648            8           125.         96.0
## # ... with 758 more rows, and 9 more variables: skinfold &lt;dbl&gt;,
## #   insulin &lt;dbl&gt;, pedigree &lt;dbl&gt;, age &lt;int&gt;, weight_class_normal &lt;dbl&gt;,
## #   weight_class_obese &lt;dbl&gt;, weight_class_overweight &lt;dbl&gt;,
## #   weight_class_other &lt;dbl&gt;, weight_class_hcai_missing &lt;dbl&gt;</code></pre>
<p>We get a short message about when the model was trained and how well it preformed in training, and then we get back a data frame that looks sort of like the original, but has a new column <code>predited_diabetes</code> that contains the model-generated probability each individual has diabetes, and changes that were made preparing the data for model training are preserved, e.g. missingness has been filled in and <code>weight_class</code> has been split into a series of “dummy” variables.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#set-up">Set up</a></li>
      <li><a href="#quick-dirty-machine-learning">Quick &amp; Dirty Machine Learning</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Levi Thatcher, Michael Levy, Mike Mastanduno, Taylor Larsen, Taylor Miller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
